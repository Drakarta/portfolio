---
import Layout from "../layouts/Layout.astro";
import pengu from "../assets/pengu.png";
import heart from "../assets/heart.png";

const now = new Date();
if ((now.getMonth() !== 0 && now.getMonth() !== 1) || now.getDay() > 14) {
	return Astro.redirect("/404");
}
---

<Layout title="Valentines" description="" bodyClass="bg-pink">
	<div
		id="Container"
		class="flex h-svh w-full flex-col items-center justify-center"
	>
		<div class="w-max font-dancing text-6xl drop-shadow-md">
			Will you be my Valentines?
		</div>
		<div class="-mb-20 -mt-12 w-96"><img src={pengu.src} alt="pengu" /></div>
		<div class="flex justify-center gap-8">
			<button
				id="Yes"
				class="4 absolute m-8 h-14 w-24 rounded-md bg-pink2 p-3 font-bespoke text-2xl shadow-md"
				style="right: 50vw;">Yes</button
			>
			<div id="No" class="absolute p-8" style="left: 50vw;">
				<button
					class="w-24 rounded-md bg-pink2 p-3 font-bespoke text-2xl shadow-md"
					>No</button
				>
			</div>
		</div>
	</div>
	<div class="pointer-events-none absolute left-0 top-0 h-svh w-screen">
		<img
			id="1"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 12.5%; top: 75%;"
		/>
		<img
			id="2"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 15%; top: 50%;"
		/>
		<img
			id="3"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 20%; top: 25%;"
		/>
		<img
			id="4"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 30%; top: 10%;"
		/>
		<img
			id="5"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 42.5%;"
		/>
		<img
			id="6"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 57.5%;"
		/>
		<img
			id="7"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 70%; top: 10%;"
		/>
		<img
			id="8"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 80%; top: 25%;"
		/>
		<img
			id="9"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 85%; top: 50%;"
		/>
		<img
			id="10"
			src={heart.src}
			alt="heart"
			class="absolute -ml-8 w-16 opacity-0 transition-all duration-500"
			style="left: 87.5%; top: 75%;"
		/>
		<img
			id="11"
			src={heart.src}
			alt="heart"
			class="absolute w-1/3 opacity-0 transition-all duration-500"
			style="left: 50%; top: 50%; transform: translate(-50%, -50%);"
		/>
		<div
			id="12"
			class="absolute font-dancing text-9xl opacity-0 transition-all duration-500"
			style="left: 50%; top: 50%; transform: translate(-50%, -50%);"
		>
			YAY
		</div>
	</div>
	<script>
		const width = document.getElementById("Container")?.clientWidth;
		const height = document.getElementById("Container")?.clientHeight;
		const no = document.getElementById("No");
		no?.addEventListener("mouseenter", () => {
			if (height) {
				no.style.top = `${Math.random() * (height - (no.clientHeight + 64))}px`;
			}
			if (width) {
				no.style.left = `${Math.random() * (width - (no.clientWidth + 64))}px`;
			}
		});
		no?.addEventListener("click", () => {
			if (height) {
				no.style.top = `${Math.random() * (height - (no.clientHeight + 64))}px`;
			}
			if (width) {
				no.style.left = `${Math.random() * (width - (no.clientWidth + 64))}px`;
			}
		});

		function sleep(ms: number) {
			return new Promise((resolve) => setTimeout(resolve, ms));
		}

		const yes = document.getElementById("Yes");
		yes?.addEventListener("click", async () => {
			console.log("clicked");
			document.getElementById("1")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("2")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("3")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("4")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("5")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("6")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("7")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("8")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("9")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("10")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("11")?.classList.remove("opacity-0");
			await sleep(100);
			document.getElementById("12")?.classList.remove("opacity-0");
		});
	</script>
</Layout>
